webpackJsonp([4],{"0Vfn":function(t,e){},B61d:function(t,e,a){"use strict";var s=a("AA6R"),n=a.n(s),i=a("o69Z"),o=a("rhik"),l=a("1fWZ"),c=Object(i.b)("contact-card"),r=c[0],d=c[1],v=c[2];function u(t,e,a,s){var i=e.type,c=e.editable;return t(l.a,n()([{attrs:{center:!0,border:!1,isLink:c,valueClass:d("value"),icon:"edit"===i?"contact":"add-square"},class:d([i]),on:{click:function(t){c&&Object(o.a)(s,"click",t)}}},Object(o.b)(s)]),["add"===i?e.addText||v("addText"):[t("div",[v("name")+"："+e.name]),t("div",[v("tel")+"："+e.tel])]])}u.props={tel:String,name:String,addText:String,editable:{type:Boolean,default:!0},type:{type:String,default:"add"}},e.a=r(u)},I5yH:function(t,e,a){"use strict";var s=a("AA6R"),n=a.n(s),i=a("o69Z"),o=a("V+2B"),l=a("rhik"),c=a("+2ln"),r=a("1fWZ"),d=a("SSsa"),v=a("hZxG"),u=a("pykS"),_=Object(i.b)("contact-list"),f=_[0],m=_[1],p=_[2];function g(t,e,a,s){var i=e.list&&e.list.map(function(e,a){function n(){Object(l.a)(s,"input",e.id),Object(l.a)(s,"select",e,a)}return t(r.a,{key:e.id,attrs:{isLink:!0,valueClass:m("item-value")},class:m("item"),scopedSlots:{default:function(){return t(v.a,{attrs:{name:e.id,iconSize:16,checkedColor:o.l},on:{click:n}},[t("div",{class:m("name")},[e.name+"，"+e.tel])])},"right-icon":function(){return t(c.a,{attrs:{name:"edit"},class:m("edit"),on:{click:function(t){t.stopPropagation(),Object(l.a)(s,"edit",e,a)}}})}},on:{click:n}})});return t("div",n()([{class:m()},Object(l.b)(s)]),[t(u.a,{attrs:{value:e.value},class:m("group")},[i]),t(d.a,{attrs:{square:!0,size:"large",type:"danger",text:e.addText||p("addText")},class:m("add"),on:{click:function(){Object(l.a)(s,"add")}}})])}g.props={value:null,list:Array,addText:String},e.a=f(g)},KUPT:function(t,e,a){"use strict";var s=a("nsZj"),n=(a.n(s),a("nOtf")),i=(a.n(n),a("px3J")),o=(a.n(i),a("hW8u")),l=(a.n(o),a("eh36")),c=(a.n(l),a("JKiR")),r=(a.n(c),a("dlmg"));a.n(r)},Kvvh:function(t,e,a){"use strict";var s=a("nsZj"),n=(a.n(s),a("nOtf")),i=(a.n(n),a("4rJS")),o=(a.n(i),a("z7WZ"));a.n(o)},PCAO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("eqfM");var s,n=a("/QYm"),i=a("bOdI"),o=a.n(i),l=(a("mMXg"),a("qYlo")),c=(a("k3b4"),a("+2ln")),r=(a("OWWB"),a("1fWZ")),d=(a("i0mo"),a("Hkar")),v=(a("KUPT"),a("VK7m")),u=(a("Kvvh"),a("I5yH")),_=(a("adRf"),a("B61d")),f=(a("zP7x"),a("rD0v")),m=(a("3AsM"),a("7ZPY")),p={name:"",mixins:[],components:(s={},o()(s,m.a.name,m.a),o()(s,f.a.name,f.a),o()(s,_.a.name,_.a),o()(s,u.a.name,u.a),o()(s,v.a.name,v.a),o()(s,d.a.name,d.a),o()(s,r.a.name,r.a),o()(s,c.a.name,c.a),o()(s,l.a.name,l.a),s),props:{},data:function(){return{isShow:!1,list:{},isPageShow:!1,isLength:0,totalPrice:"0.00",taxPrice:"0.00",sumPrice:"0.00",moAddess:{},userAddess:[],isPan:!1,cartInfo:[],notedata:"",verifyState:!1,needCheck:!1,hasOuter:!1}},computed:{},watch:{$route:function(t,e){console.log(t)}},beforeRouteLeave:function(t,e,a){console.log(e),a()},beforeRouteEnter:function(t,e,a){console.log(e),a()},beforeCreate:function(){console.log("给个loading界面 created撤销loading"),n.a.loading({mask:!1,message:"加载中..."})},created:function(){var t=this;console.log("页面初始化数据加载一般写这里");var e=this.$route.query.id||localStorage.getItem(nid);localStorage.setItem("nid",e),Array.isArray(e)?(console.log("数组"),e=e.join(",")):e=e.toString(),this.$http.post("mzyl/auth_api/confirm_order.html",{cartId:e}).then(function(e){console.log(e);var a=e.data.data;t.list=a;var s=a.cartInfo,i=0,o=0;for(var l in s)i+=parseFloat(s[l].tax)*parseFloat(s[l].cart_num),o+=parseFloat(s[l].productInfo.price)*parseFloat(s[l].cart_num);t.sumPrice=(i+o).toFixed(2),t.taxPrice=i.toFixed(2),t.totalPrice=o.toFixed(2),t.isLength=a.cartInfo.length||"",t.cartInfo=a.cartInfo,t.pointId=parseInt(a.point_id),t.seckillId=parseInt(a.seckill_id),t.orderKey=a.orderKey,e.data.data?(n.a.clear(),t.isPageShow=!0):Object(n.a)({mask:!1,message:"请刷新页面"}),t.getUserVerifyState()}),this.getMoAddess(),this.getUserAddess(),this.getGongConfig()},mounted:function(){},updated:function(){console.log("页面刷新了")},beforeDestory:function(){console.log("你确认删除XX吗？")},destroyed:function(){console.log("页面跳转了,当前组件已被删除，清空相关内容")},methods:{getGongConfig:function(){var t=document.location.href;console.log(t),this.$http.get("mzyl/wechat_api/getSignPackage",{params:{url:t}}).then(function(t){console.log(t);var e=t.data;wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["chooseWXPay"]})})},handleClick:function(t){console.log(t)},handleAdd:function(){this.isShow=!0},handleClose:function(){this.isShow=!1},handleXuan:function(){this.$router.push("address")},getMoAddess:function(){var t=this;this.$http.get("mzyl/user_api/user_default_address.html",{params:{}}).then(function(e){if(200==e.data.code)if(console.log(e.data.data),0!=e.data.data.length){var a=""+(e.data.data.province+e.data.data.city+e.data.data.district+e.data.data.detail);e.data.data.sumAddess=a,t.moAddess=e.data.data,t.isPan=!1}else t.isPan=!0,console.log("空")})},getUserAddess:function(){var t=this;this.$http.get("mzyl/user_api/user_address_list.html",{params:{}}).then(function(e){if(200==e.data.code){var a=e.data.data;a.forEach(function(t,e,a){var s=""+(a[e].province+a[e].city+a[e].district+a[e].detail);a[e].sumAddess=s,console.log(a[e].is_default),1==a[e].is_default?a[e].is_flag=1:a[e].is_flag=0}),console.log(a),t.userAddess=a}})},handleAddTwo:function(t,e){t.forEach(function(t){t.is_flag=0}),t[e].is_flag=1,this.userAddess=t,this.moAddess=t[e],this.isShow=!1,this.isPan=!1},hanldeSettlement:function(){var t=this.moAddess,e={};if(console.log(this.cartInfo),void 0==t.id)return n.a.fail("请选择收获地址"),!1;if(!this.verifyState)return n.a.fail("请先实名认证"),!1;n.a.loading({mask:!1,message:"支付中..."}),e.addressId=t.id;var a=this.getBargainId(this.cartInfo);e.bargainId=a.bargainId,e.combinationId=a.combinationId,e.pinkId=0,e.couponId=0,e.mark=this.notedata,e.payType="weixin",e.pointId=this.pointId,e.seckill_id=this.seckillId,e.key=this.orderKey,console.log(e),this.$http.post("mzyl/auth_api/create_order.html",e).then(function(t){if(console.log(t),200==t.data.code){var e=t.data.data.result;e.orderId,e.key;wx.ready(function(){wx.chooseWXPay({timestamp:e.jsConfig.timestamp,nonceStr:e.jsConfig.nonceStr,package:e.jsConfig.package,signType:e.jsConfig.signType,paySign:e.jsConfig.paySign,success:function(t){Object(n.a)("支付成功"),n.a.clear()},cancel:function(t){Object(n.a)("取消支付"),n.a.clear()},fail:function(t){Object(n.a)("取消支付"),n.a.clear()}})})}})},getBargainId:function(t){var e=0,a=0;return t.forEach(function(t,s,n){e=n[s].bargain_id,a=n[s].combination_id}),{bargainId:e,combinationId:a}},getUserVerifyState:function(){var t=localStorage.getItem("verify_state"),e=this.cartInfo,a=!1,s=!1;for(var n in 1==t&&(a=!0),e){1==e[n].productInfo.is_othersource&&(s=!0,!1,this.verifyState=a,this.hasOuter=s)}s||(!0,this.needCheck=!0)}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isPageShow,expression:"isPageShow"}],staticClass:"div_all submitOrder"},[a("div",{staticClass:"s_add"},[a("van-cell-group",{staticClass:"goods-cell-group p_r",on:{click:t.handleAdd}},[a("van-cell",[a("template",{slot:"title"},[t.isPan?a("div",{staticClass:"dis flex_y_center flex_x_between"},[a("div",[t._v(" 设置默认收获地址")]),t._v(" "),a("van-icon",{attrs:{name:"arrow"}})],1):a("div",[a("div",{staticClass:"dis flex_y_center fz_14 fw_600"},[a("div",[t._v(t._s(t.moAddess.real_name))]),t._v(" "),a("div",{staticClass:"ml_10"},[t._v(t._s(t.moAddess.phone))])]),t._v(" "),a("div",{staticClass:"dis flex_y_center fz_14"},[1==t.moAddess.is_default?a("div",{staticClass:"color_E93323"},[t._v("[默认]")]):t._e(),t._v(" "),a("div",{class:1==t.moAddess.is_default?"ml_10":""},[t._v(t._s(t.moAddess.sumAddess))])]),t._v(" "),a("div",{staticClass:"s_ico p_a"},[a("van-icon",{attrs:{name:"arrow"}})],1)])])],2)],1),t._v(" "),a("van-cell-group",{directives:[{name:"show",rawName:"v-show",value:!t.needCheck,expression:"!needCheck"}],staticClass:"goods-cell-group"},[a("van-cell",{staticClass:"mtb_8",class:t.verifyState?"":"s_ver",attrs:{value:t.verifyState?"已认证":"未认证","is-link":"",to:"authentication"}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("实名认证状态")])])],2)],1),t._v(" "),a("van-cell-group",[a("van-cell",{attrs:{title:"共 "+t.isLength+"件商品"}})],1),t._v(" "),t._l(t.list.cartInfo,function(e,s){return a("van-cell-group",{key:s},[a("van-cell",{attrs:{value:""}},[a("template",{slot:"title"},[a("div",{staticClass:"dis flex_y_start"},[a("div",{staticClass:"s_commodity"},[a("img",{attrs:{src:e.productInfo.image,alt:""}})]),t._v(" "),a("div",{staticClass:"s_price dis flex-dir-column"},[a("div",{staticClass:"onelist-hidden pt_5"},[t._v(t._s(e.productInfo.store_name))]),t._v(" "),e.productInfo.attrInfo?a("div",{staticClass:"fz_12 s_price_font"},[t._v(t._s(e.productInfo.attrInfo.suk))]):t._e(),t._v(" "),a("div",{staticClass:"pt_5 color_E93323"},[t._v("￥"+t._s(e.productInfo.price))])]),t._v(" "),a("div",{staticClass:"ml_10  pt_5"},[t._v("x"+t._s(e.cart_num))])])])],2)],1)}),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{staticClass:"mt_8",attrs:{value:"请选择","is-link":""}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("优惠劵")])])],2)],1),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{attrs:{value:"免运费"}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("快递费用")])])],2)],1),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{attrs:{value:""}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("备注信息")]),t._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notedata,expression:"notedata"}],staticClass:"s_input",attrs:{maxlength:"150",placeholder:"请添加备注(150字以内)"},domProps:{value:t.notedata},on:{input:function(e){e.target.composing||(t.notedata=e.target.value)}}})])])],2)],1),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{staticClass:"mt_8",attrs:{value:""}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("支付方式")]),t._v(" "),a("div",{staticClass:"mt_20 s_pay dis flex_y_center flex_x_between"},[a("div",{staticClass:"dis flex_y_center"},[a("div",{staticClass:"iconfont icon-weixin2 s_imgWeixin"}),t._v(" "),a("div",{staticClass:"ml_5 color_E93323"},[t._v("微信支付")])]),t._v(" "),a("div",[t._v("默认微信支付")])])])],2)],1),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group"},[a("van-cell",{staticClass:"mt_8",attrs:{value:""}},[a("template",{slot:"title"},[a("div",{staticClass:"s_fei"},[a("div",{staticClass:"dis flex_y_center flex_x_between pb_5"},[a("div",[t._v("商品总价：")]),t._v(" "),a("div",[t._v("￥"+t._s(t.totalPrice))])]),t._v(" "),a("div",{staticClass:"dis flex_y_center flex_x_between pb_5"},[a("div",[t._v("税费：")]),t._v(" "),a("div",[t._v("￥"+t._s(t.taxPrice))])]),t._v(" "),a("div",{staticClass:"dis flex_y_center flex_x_between"},[a("div",[t._v("运费：")]),t._v(" "),a("div",[t._v("￥0")])])])])],2)],1),t._v(" "),a("van-cell-group",{staticClass:"goods-cell-group s_flex"},[a("van-cell",[a("template",{slot:"title"},[a("div",{staticClass:"dis flex_y_center flex_x_between s_flex2"},[a("div",{staticClass:"dis flex_y_center"},[a("div",[t._v("合计：")]),t._v(" "),a("div",{staticClass:"color_E93323"},[t._v("￥"+t._s(t.sumPrice))])]),t._v(" "),a("div",{staticClass:"s_payBtn",on:{click:t.hanldeSettlement}},[t._v("\n              立即结算\n            ")])])])],2)],1)],2),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("div",{staticClass:"s_popup"},[a("div",{staticClass:"dis flex_y_center flex-x-center p_r pb_20"},[a("div",{staticClass:"fz_16 fw_600"},[t._v("选择地址")]),t._v(" "),a("div",{staticClass:"s_close p_a",on:{click:t.handleClose}},[a("van-icon",{attrs:{name:"cross"}})],1)]),t._v(" "),a("div",t._l(t.userAddess,function(e,s){return a("div",{key:s,staticClass:"dis flex_y_center ptb_10 s_border p-r",on:{click:function(e){return t.handleAddTwo(t.userAddess,s)}}},[a("div",{staticClass:"s_addIcon iconfont icon-ditu",style:1==e.is_flag?"color:#E93323":""}),t._v(" "),a("div",{staticClass:"dis flex-dir-column flex-x-center",style:1==e.is_flag?"color:#E93323":""},[a("div",{staticClass:"fz_12 fw_600"},[t._v(t._s(e.real_name)+" "+t._s(e.phone))]),t._v(" "),a("div",{staticClass:"fz_12 pt_5"},[t._v(t._s(e.sumAddess))])]),t._v(" "),a("div",{staticClass:"s_success p_a"},[1==e.is_flag?a("van-icon",{attrs:{name:"success"}}):t._e()],1)])}),0),t._v(" "),a("div",{staticClass:"s_xuan"},[a("div",{staticClass:"s_xuan_add",on:{click:t.handleXuan}},[t._v("选择其他地址")])])])])],1)},staticRenderFns:[]};var h=a("VU/8")(p,g,!1,function(t){a("0Vfn")},null,null);e.default=h.exports},SFrx:function(t,e){},VK7m:function(t,e,a){"use strict";var s=a("RfZZ"),n=a("o69Z"),i=a("SSsa"),o=a("0zAV"),l=a("/QYm"),c=a("il3B"),r=a("6Svu"),d=Object(n.b)("contact-edit"),v=d[0],u=d[1],_=d[2],f={tel:"",name:""};e.a=v({props:{isEdit:Boolean,isSaving:Boolean,isDeleting:Boolean,contactInfo:{type:Object,default:function(){return Object(s.a)({},f)}},telValidator:{type:Function,default:r.a}},data:function(){return{data:Object(s.a)({},f,{},this.contactInfo),errorInfo:{name:!1,tel:!1}}},watch:{contactInfo:function(t){this.data=Object(s.a)({},f,{},t)}},methods:{onFocus:function(t){this.errorInfo[t]=!1},getErrorMessageByKey:function(t){var e=this.data[t].trim();switch(t){case"name":return e?"":_("nameEmpty");case"tel":return this.telValidator(e)?"":_("telInvalid")}},onSave:function(){var t=this;["name","tel"].every(function(e){var a=t.getErrorMessageByKey(e);return a&&(t.errorInfo[e]=!0,Object(l.a)(a)),!a})&&!this.isSaving&&this.$emit("save",this.data)},onDelete:function(){var t=this;c.a.confirm({message:_("confirmDelete")}).then(function(){t.$emit("delete",t.data)})}},render:function(){var t=this,e=arguments[0],a=this.data,s=this.errorInfo,n=function(e){return function(){return t.onFocus(e)}};return e("div",{class:u()},[e(o.a,{attrs:{clearable:!0,maxlength:"30",label:_("name"),placeholder:_("nameEmpty"),error:s.name},on:{focus:n("name")},model:{value:a.name,callback:function(t){a.name=t}}}),e(o.a,{attrs:{clearable:!0,type:"tel",label:_("tel"),placeholder:_("telEmpty"),error:s.tel},on:{focus:n("tel")},model:{value:a.tel,callback:function(t){a.tel=t}}}),e("div",{class:u("buttons")},[e(i.a,{attrs:{block:!0,type:"danger",text:_("save"),loading:this.isSaving},on:{click:this.onSave}}),this.isEdit&&e(i.a,{attrs:{block:!0,text:_("delete"),loading:this.isDeleting},on:{click:this.onDelete}})])])}})},adRf:function(t,e,a){"use strict";var s=a("nsZj"),n=(a.n(s),a("nOtf")),i=(a.n(n),a("SFrx"));a.n(i)},dlmg:function(t,e){},mMXg:function(t,e,a){"use strict";var s=a("nsZj"),n=(a.n(s),a("nOtf")),i=(a.n(n),a("hW8u"));a.n(i)},z7WZ:function(t,e){}});
//# sourceMappingURL=4.2740df909ef5bdd05e3d.js.map